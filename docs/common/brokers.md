# TEntityBroker

`TEntityBroker` — базовый брокер для работы с REST API сущностей. Класс определяет набор виртуальных методов, которые потомки реализуют для конкретных конечных точек. Каждый брокер реализует конкретный сервис REST API (например, `/abonents`). Обычно для каждой сущности TEntity реализован свой брокер.

## Ключевые особенности

- **Типы данных по умолчанию.** Статические методы `ClassType`, `ListClassType` и `ResponseClassType` возвращают стандартные классы (`TEntity`, `TEntityList` и `TResponse`), которые можно переопределить в наследниках. 
- **Маршрутизация запросов.** Абстрактный метод `GetBasePath` задаёт корневой путь REST API, а `GetPath` автоматически добавляет значение свойства `AddPath`, позволяя гибко формировать URL. Дополнение `AddPath` необходимо ввиду вложенности запросов для некоторых сущностей (например, для сущностей `/tasks` существует сущность `/sources` и общий путь выглядит так `/tasks/<TID>/sources`)
- **Работа с коллекциями.** Метод `List` должен вернуть список сущностей с учётом пагинации, сортировки и фильтрации; конкретная реализация определяется в производных брокерах.
- **CRUD-операции.** Потомки реализуют методы `CreateNew`, `New`, `Info`, `Update` и `Remove`, отвечающие за создание, чтение, обновление и удаление сущностей.
- **Упрощённые вызовы.** Перегруженные варианты `Info(AEntity: TEntity)` и `Remove(AEntity: TEntity)` используют идентификатор переданной сущности, чтобы вызвать основную реализацию по строковому ID.

## Дополнительные элементы

- **Свойство `AddPath`.** Позволяет динамически добавлять сегмент пути (например, идентификатор родительской сущности) перед выполнением запроса.
