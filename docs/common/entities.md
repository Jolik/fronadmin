# Базовые сущности объектной модели

## TFieldSet

`TFieldSet` — базовый класс для всех структур данных, описывающих набор полей. Он отвечает за создание объектов, чтение данных из JSON и сериализацию обратно в JSON.

### Основные возможности

- **Гибкие конструкторы.** Поддерживает создание пустого объекта и инициализацию напрямую из `TJSONObject` с ограничением списка свойств.
- **Назначение из другого экземпляра.** Метод `Assign` копирует значения полей из совместимого объекта и служит точкой расширения для потомков.
- **Абстрактный разбор и запись.** Потомки обязаны реализовать `Parse` и `Serialize`, чтобы определить, какие свойства считываются и сохраняются.
- **Работа со строковым JSON.** Дополнительные методы `Serialize` и `JSON` помогают получить готовый JSON-объект или строку.

## TEntity

`TEntity` наследует `TFieldSet` и представляет универсальную сущность бизнес-логики. Класс содержит поля, которые будут поддерживаться для всех потомков класса (например, идентификатор сущности `Id`). В том числе поддерживаются "сложные" поля которые представляют собой класса TFieldSet (см. поля `body`, `data` и `settings`)

### Поля и свойства по умолчанию

- Идентификаторы: `Id`, `CompId`, `Owner`, `DepId`.
- Описательные поля: `Name`, `Caption`, `Def`.
- Служебные признаки: `Enabled`, временные метки `Created`, `Updated`, `Commited`, `Archived`.
- Вложенные объекты: `Settings`, `Data`, `Body`, создаваемые через переопределяемые фабричные методы `SettingsClassType`, `DataClassType`, `BodyClassType`. Поля `Settings`, `Data`, `Body` представляют собой классы и они могут наследоваться потомками TEntity чтобы реализовывать спкцифичные поля/методы потомка

### Поведение

- **Переопределяемые типы.** Потомки могут указать собственные классы настроек, данных и тела, а также список `TEntityList` и ключ идентификатора.
- **Парсинг JSON.** Метод `Parse` считывает стандартные поля и при наличии рекурсивно разбирает вложенные разделы `settings`, `data` и `body`.
- **Сериализация.** Метод `Serialize` формирует JSON-объект с основными атрибутами и вложенными структурами.
- **Копирование.** Переопределённый `Assign` копирует метаданные и делегирует копирование вложенных объектов через их собственные `Assign`.

## Связанные коллекции

- `TFieldSetList` и `TEntityList` реализуют списки соответствующих объектов. Они обеспечивают парсинг массивов JSON, создание элементов нужного типа и добавление в коллекцию, что упрощает массовые операции с сущностями.
