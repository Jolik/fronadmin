## Описание объектной модели

### Базовые классы в EntityUnit.pas

1. TFieldSet - класс инкапсулирующий набор полей и базовые методы
  * Parse - парсинг данных из JSON
  * Serialize - представление данных в виде JSON

2. TFieldSetList - массив объектов TFieldSet с и базовыми методами
  * ParseList - парсинг данных из JSON
  * AddList - доваляет данные из JSON
  * SerializeList - представление данных в виде JSON

3. TEntity (TFieldSet) - класс инкапсулирующий набор полей спреопределенными полями:
  *  Id: String;
  *  DepId: string;
  *  Name: String;
  *  CompId: string;
  *  Caption: String;
  *  Created: TDateTime;
  *  Updated: TDateTime;
  *  Enabled: boolean;
  *  Def: String;

  *  Settings: TSettings;
  *  Body: TBody;
  *  Data: TData;

  *  ListClassType: TEntityListClass;
  
  Типы полей Settings, Body и Data могут быть переопределены потомком, чтобы указать "свои" реализации этих классов

  Тип поля ListClassType может быть переопределен потомком, чтобы указать "свою" реализацию списка классов 


2. TEntityList (TFieldSetList) - массив объектов TEntity
   * ItemClassType: TEntityClass;

  Тип поля ItemClassType может быть переопределен потомком, чтобы указать "свою" реализацию элемента списка 

Таким образом, задача разработчика заключается в наследовании классов и реализации методов Parse и Serialize для конкретной сущности API

### Особенности реализации для сущностей с переменными полями

Некоторые сущности имеет различные поля в зависимости от своего типа.

Характерным примером является сущность TLink которая имеет различный формат поля `data.settings` в зависимости от значения поля `type`

В этом случае необходимо добавить поле типа foo: TFieldSet и создать необходимое количество его наследнико. Далее при парсинге необходимо в поле `foo` устанавливать нужную реализацию класса


