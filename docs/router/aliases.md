# Ресурс "Алиасы" (aliases)

Алиасы представляют собой условные имена для канала или списка каналов.

Алиасы могут использоваться в Таблице распределения так же, как и любые другие каналы.

Распределение контента в Алиас приводит к распределению во все каналы, которые включены в Алиас.

## Формат значения внутри поля `channels`

Например, распределение контента в Алиас "foo" с полем `channels`:

```json
{
  "lch1": [],
  "lch2": [
    "ab1"
  ]
}
```

приведет к распределению в каналы "lch1" и "lch2" (с добавлением атрибутов из абонента "ab1").

## 1. Список Алиасов

**Назначение:**   для получения списка Алиасов.

**Запрос:** `/api/v2/aliases/list`

**Тип запроса:**  POST

**Параметры тела запроса:**

| **имя поля**  | **тип**    | **описание**                                                               |
|---------------|------------|----------------------------------------------------------------------------|
| `page`        |            | текущая страница для отображения                                           | 
| `pagesize`    |            | кол-во элементов на странице для отображения. По умолчанию pagesize = 100  | 
| `alid`        | `[]uuid`   | массив идентификатров записей для выдачи                                   | 
| `name`        | `[]string` | массив имён Алиасов для выдачи                                             | 
| `channel`     | `[]string` | массив имён каналов Алиасов для выдачи                                     | 
| `updatedFrom` | `unixtime` | время начала обновления Алиаса                                             | 
| `updatedTo`   | `unixtime` | время окончания обновления Алиаса                                          |
| `searchStr`   | `string`   | строка поиска по полям из `searchBy`                                       | 
| `searchBy`    | `[]string` | устанавливает по каким полям делать поиск `searchStr`. Возможные значения: | 
| `-caption`    | `opt`      | поиск по имени записей Алиаса                                              | 
| `-name`       | `opt`      | поиск по имени Алиасов                                                     | 
| `order`       | `[]string` | устанавливает сортировку выдачи списка. Возможные значения в массиве:      | 
| `-alid`       | `opt`      | сортировка по ID Алиаса                                                    | 
| `-name`       | `opt`      | сортировка по имени Алиасов                                                | 
| `-caption`    | `opt`      | сортировка по заголовку Алиаса                                             | 
| `-created`    | `opt`      | сортировка по времени создания записи об Алиаса                            | 
| `-updated`    | `opt`      | сортировка по времени обновления записи об Алиаса                          | 
| `orderDir`    | `string`   | устанавливает направление сортировки выдачи списка. `asc` или `desc`       | 

**Тело запроса:**

```json
{
  "alid": [
    "6016ebf8-81a3-11e7-bb31-be2e44b06b34",
    "6016ebf8-81a3-11e7-bb31-be2e44b06b35"
  ],
  "channel": [
    "lch1",
    "lch2"
  ],
  "name": [
    "al1",
    "al2"
  ]
}
```

**Примеры:**  `/api/v2/aliases/list`

**Ответ:**

```json
{
  "meta": {
    "code": 200,
    "rid": "058e6b2d-a3b6-11ed-a80b-02420a00015b",
    "time": "5.909"
  },
  "response": {
    "info": {
      "page": 0,
      "pagecount": 1,
      "pagesize": 100,
      "total": 4
    },
    "aliases": [
      {
        "caption": "sample alias1",
        "name": "al1",
        "alid": "a7fb3ae9-806a-11ed-a408-02420a00063a",
        "channels": {
          "lch1": [],
          "lch2": [
            "ab1"
          ]
        },
        "created": 1671543109,
        "updated": 1671548483
      },
      {
        "caption": "sample alias2",
        "name": "al2",
        "alid": "a7fb3ae9-806a-11ed-a408-02420a00063a",
        "channels": {
          "lch3": []
        },
        "created": 1671543109,
        "updated": 1671548483
      },
      {
        "caption": "sample alias3",
        "name": "al3",
        "alid": "a7fb3ae9-806a-11ed-a408-02420a00063a",
        "channels": {
          "lch4": [],
          "lch5": []
        },
        "created": 1671543109,
        "updated": 1671548483
      }
    ]
  }
}

```

**Поля ответа:**

| **имя поля** | **тип**    | **описание**                                                                 |
|--------------|------------|------------------------------------------------------------------------------|
| `page`       | `string`   | текущий номер страницы (дублирует параметр запроса)                          |
| `pagecount`  | `string`   | общее число страниц (зависит от размера pagesize)                            |
| `pagesize`   | `string`   | сколько элементов выдавать на странице (дублирует параметр запроса)          |
| `total`      | `string`   | всего элементов в таблице                                                    |
| `alid`       | `string`   | уникальный идентификатор Алиаса                                              |
| `caption`    | `string`   | название Алиаса                                                              |
| `name`       | `string`   | уникальное имя Алиаса                                                        |
| `created`    | `unixtime` | Unix время даты создания                                                     |
| `updated`    | `unixtime` | Unix время даты обновления                                                   |
| `channels`   | `json`     | объект, сопоставляющий имена каналов, составляющих Алиас, массивам абонентов |

## 2. Информация по Алиасу

**Назначение:**   Получение полной информации о Алиасе

**Запрос:** `/api/v2/aliases/:alid`

**Тип запроса:** GET

**Возможные параметры**:

**Примеры:**  `/api/v2/aliases/a7fb3ae9-806a-11ed-a408-02420a00063a`

**Ответ:**

```json

{
  "meta": {
    "code": 200,
    "rid": "865a50a4-a3bb-11ed-a80b-02420a00015b",
    "time": "6.978"
  },
  "response": {
    "alias": {
      "caption": "sample alias3",
      "name": "synop",
      "alid": "a7fb3ae9-806a-11ed-a408-02420a00063a",
      "channels": {
        "lch1": [],
        "lch2": [
          "ab1"
        ]
      },
      "created": 1671543109,
      "updated": 1671548483
    }
  }
}

```

**Поля ответа:**

| **имя поля** | **тип**    | **описание**                                                                 |
|--------------|------------|------------------------------------------------------------------------------|
| `alid`       | `string`   | уникальный идентификатор Алиаса                                              |
| `caption`    | `string`   | название Алиаса                                                              |
| `name`       | `string`   | уникальное имя Алиаса                                                              |
| `created`    | `unixtime` | Unix время даты создания                                                     |
| `updated`    | `unixtime` | Unix время даты обновления                                                   |
| `channels`   | `json`     | объект, сопоставляющий имена каналов, составляющих Алиас, массивам абонентов |

## 3. Добавить Алиас

**Назначение:**   для добавления нового Алиаса.

**Запрос:** `/api/v2/aliases/new`

**Тип запроса:** POST

**Тело запроса**:

```json

{
  "caption": "sample alias3",
  "alid": "a7fb3ae9-806a-11ed-a408-02420a00063a",
  "name": "synop",
  "channels": {
    "lch1": [],
    "lch2": [
      "ab1"
    ]
  }
}

```

**Обязательные поля запроса**:

| **имя поля** | **тип** | **описание**                                                                 |
|--------------|---------|------------------------------------------------------------------------------|
| `name`        | `string`   | уникальное имя Алиаса                                                              |
| `channels`   | `json`  | объект, сопоставляющий имена каналов, составляющих Алиас, массивам абонентов |

**Необязательные поля запроса**:

| **имя поля** | **тип**  | **описание**                    |
|--------------|----------|---------------------------------|
| `alid`       | `string` | уникальный идентификатор Алиаса |
| `caption`    | `string` | название Алиаса                 |

**Ответ:**

```json

{
  "meta": {},
  "response": {
    "alid": "e18a3dc0-704b-11e7-8cf7-a6006ad3dba0"
  }
}

```

**Поля ответа:**

| **имя поля** | **тип**  | **описание**                     |
|--------------|----------|----------------------------------|
| `alid`       | `string` | уникальный идентификатор Алиаса. |

## 4. Обновить Алиас

**Назначение:**   для обновления параметров Алиаса.

**Запрос:** `/api/v2/aliases/:alid/update`

**Возможные параметры**: нет

**Тип запроса:** POST

**Пример:**

`/api/v2/aliases/c4527e88-6fe3-11e7-b6d0-a6006ad3dba0/update`

**Тело запроса: **

```json

{
  "caption": "sample alias3",
  "channels": {
    "lch1": [],
    "lch2": [
      "ab1"
    ]
  }
}

```

**Возможные поля запроса**:

| **имя поля** | **тип**  | **описание**                                                                 |
|--------------|----------|------------------------------------------------------------------------------|
| `caption`    | `string` | название Алиаса                                                              |
| `channels`   | `json`   | объект, сопоставляющий имена каналов, составляющих Алиас, массивам абонентов |

Имя алиаса `name` обновлять нельзя.

**Ответ:**

```json

{
  "meta": {},
  "response": {}
}

```

## 5. Удалить запись об Алиасе

**Назначение:** для удаления записи об Алиасе

**Запрос** `/api/v2/rou/:alid/remove`

где `:alid` – идентификатор записи

**Тип запроса:** POST

**Пример:**  `/api/v2/aliases/dea50f0c-f55f-4063-9f17-e45ae8c03bce/remove

**Ответ:**

```json

{
  "meta": {},
  "response": {}
}

```