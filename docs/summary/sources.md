# 2. Ресурс "Источники" (sources)

**Запросы**

## 2.1. Список Источников

**Назначение:** для получения списка источников для парсинга для указанного Задачи

**Запрос:** `/api/v2/tasks/TASK_ID/sources/list`,

где 
* `TASK_ID` - идентификатор Задачи 

**Тип запроса:** GET

**Обязательные параметры**: нет

**Пример:**
* `/api/v2/tasks/1631cd00-d431-4152-8b0e-2887e1200747/sources/list`

**Ответ:**

```json

{
  "meta": {},
  "response": {
    "sources": [
        {
          "sid": "0001-012345-0017",
          "name": "Покровск АМС", 
          "enabled": true,
          "index": "12345"
        },
        {
          "sid": "0001-012345-0018",
          "name": "Рощино АМСГ", 
          "enabled": true,
          "index": "12345"
        }
    ]
  }
}

``` 

**Обязательные поля ответа:**

| **имя поля** | **тип**  | **описание**                            |
|--------------|----------|-----------------------------------------|
| `sid`        | `string` | идентификатор источника                 |
| `name`       | `string` | наименование источника                 |
| `enabled`    | `boolean` | разрешение парсинга                 |
| `index`     | `string` | индекс станции                 |

## 2.1. Информаиция по указанному Источнику

**Назначение:**: для получения информации по указанному Источнику для указанного Задачи

**Запрос:** `/api/v2/tasks/TASK_ID/sources/SRC_ID`

где
* `TASK_ID` - идентификатор Задачи 
* `SRC_ID` - уникальный идентификатор Источника

**Пример:**
* `/api/v2/tasks/1631cd00-d431-4152-8b0e-2887e1200747/sources/1111-222222-333`

**Ответ:**

```json

{  
  "meta": {},
  "response": {
    "source": 
    {
      "sid": "0001-012345-0017",
      "name": "Покровск АМС", 
      "enabled": true,
      "index": "12345",
    }
  }
}

```  

**Обязательные поля ответа:**

| **имя поля** | **тип**  | **описание**                            |
|--------------|----------|-----------------------------------------|
| `sid`        | `string` | идентификатор источника                 |
| `name`       | `string` | наименование источника                 |
| `enabled`    | `boolean` | разрешение парсинга                 |
| `index`     | `string` | индекс станции                 |


## 2.2. Добавить Источник

**Назначение:** для создания нового Источника для парсинга для указанного Задачи

**Запрос:** `/api/v2/tasks/TASK_ID/sources/new`

где 
* `TASK_ID` - идентификатор Задачи 

**Тип запроса:** POST

**Передаваемые данные:**

```json
{
  "sid": "0001-012345-0017",
  "name": "Покровск АМС", 
  "enabled": true,
  "index": "12345",
}

```

**Обязательные поля:**

| **имя поля** | **тип**  | **описание**                                    |
|--------------|----------|-------------------------------------------------|
| `sid`        | *string* | уникальный идентификатор контрольного источника |

**Необязательные поля:**

| **имя поля** | **тип**  | **описание**                                              |
|--------------|----------|-----------------------------------------------------------|
| `enabled`     | `boolean` | разрешение парсинга                                 |

**Ответ:**

```json
{
  "meta": {},
  "response": {}
}

```

## 2.3. Обновить Источник

**Назначение:** для обновления полей Источника для указанного Задачи

Обновляются указанные в запросе поля. 

**Запрос:** `/api/v2/tasks/TASK_ID/sources/SOURCE_ID/update`

где 
* `TASK_ID` - идентификатор Задачи 
* `SRC_ID` - уникальный идентификатор источника


**Тип запроса:** POST

**Пример:** `/api/v2/tasks/1631cd00-d431-4152-8b0e-2887e1200747/sources/0001-012345-000/update`

**Передаваемые данные:**

```json
{
  "enabled": true, 
  "index": "12345",
}

```

**Возможные поля источника:**

| **имя поля** | **тип**  | **описание**                                              |
|--------------|----------|-----------------------------------------------------------|
| `enabled`     | `boolean` | разрешение парсинга                                 |

**Ответ:**

```json

{
  "meta": {},
  "response": {}
}

```
## 2.5. Удалить Источник

**Назначение:** для удаления Источника из указанного Задачи

Прекратить все парсинга для Источника и удалить его из списка

**Запрос:** `/api/v2/tasks/TASK_ID/sources/rem?sid=SRC_ID`

где 
* `TASK_ID` - идентификатор Задачи 
* `SRC_ID` - уникальный идентификатор источника

**Тип запроса:** POST

**Параметры запроса:**

| **имя поля** | **тип** | **описание**                       |
|--------------|---------|------------------------------------|
| `sid`        |         | уникальный идентификатор источника |

**Пример:** `/api/v2/tasks/1631cd00-d431-4152-8b0e-2887e1200747/rem?sid=0001-012345-017`

**Ответ:**

```json

{
  "meta": {},
  "response": {}
}

```