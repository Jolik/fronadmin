# 3. Ресурс "Наблюдения" (observations)

## 3.1.Список наблюдений

**Назначение:** Для получения списка наблюдений, что зарегистрированы в сервере. Указывая какой-либо из параметров,
сервер найдет по нему наблюдения и выдаст в ответе эти наблюдения со списком типов рядов.

**Запрос** `/api/v2/observations/list`

**Тип запроса:** GET

**Возможный параметр**:

| **имя поля** | **тип**  | **описание**                                                                                                                                                                                                                                                                                                                                                            |
|--------------|----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `page`       |          | текущая страница для отображения                                                                                                                                                                                                                                                                                                                                        |
| `pagesize`   |          | кол-во элементов на странице для отображения. По умолчанию pagesize = 100                                                                                                                                                                                                                                                                                               |
| `sid`        | []string | список источников                                                                                                                                                                                                                                                                                                                                                       |
| `oid`        | []string | список идентификаторов наблюдения                                                                                                                                                                                                                                                                                                                                       |
| `dstid`      | []string | список идентификатор типа ряда                                                                                                                                                                                                                                                                                                                                          |
| `dataseries` | boolean  | если установлено в `true` то в ответе выдается информация о типах рядов                                                                                                                                                                                                                                                                                                             |
| `sig`        |          | значимость измерения. Возможные значения: **MAX, MIN, AVG**                                                                                                                                                                                                                                                                                                             |
| `per`        |          | период измерения                                                                                                                                                                                                                                                                                                                                                        |
| `pkind`      |          | тип периода измерения                                                                                                                                                                                                                                                                                                                                                   |
| `dis`        |          | дискретность измерения                                                                                                                                                                                                                                                                                                                                                  |
| `dkind`      |          | тип дискретности измерения                                                                                                                                                                                                                                                                                                                                              |
| `height`     |          | высота производства измерения                                                                                                                                                                                                                                                                                                                                           |
| `hkind`      |          | тип измерения высоты                                                                                                                                                                                                                                                                                                                                                    |
| `flags`      |          | флаги поиска рядов. Могут быть следующих вариантов:                                                                                                                                                                                                                                                                                                                     |
| `[strict]`   | -opt     | требуется строгое соответствие. Если не указан этот флаг, то в ответ выводятся также типы рядов, у которых соответствующие поля = nil. Например, в запросе указано sig = MAX. В случае, если указан флаг strict, то в ответ могут попасть только ряды у которых поле sig = MAX. Если флаг strict не указан, то в ответ попадают ряды у которых поле sig = MAX или NULL. |

**Ответ:** :

```json

{
  "meta": {},
  "response": {
    "observations": {
      "sid": "0001 -012345 - 000",
      "count": 3,
      "items": [
        {
          "oid": "ATM-TMP",
          "uid": "1-02-52",
          "name": "Температура воздуха",
          "dstypes": {
            "count": 2,
            "items": [
              {
                "dstid": "ATM-TMP-AIRT-001",
                "main": true,
                "name": "Температура воздуха (2м)",
                "uid": "1-02-52"
              },
              {
                "dstid": " ATM - TMP - AIRT - 002 ",
                "name": " Минимальная температура воздуха за ночь(2м)",
                "caption": "Минимальная температура воздуха за ночь",
                "uid": "1-02-52"
              }
            ]
          }
        },
        {
          "oid": " GND - TMP ",
          "name": " Температура почвы ",
          "uid": "1-02-52",
          "dstypes": {
            "count": 4,
            "items": [
              {
                "dstid": " GND - TMP - GNDT - 001 ",
                "name": " Температура почвы на глубине 3 см ",
                "uid": "1-02-52"
              },
              {
                "dstid": " GND - TMP - GNDT - 002 ",
                "uid": "1-02-52",
                "name": " Температура почвы на глубине 5 см "
              },
              {
                "dstid": " GND - TMP - GNDT - 003 ",
                "name": " Температура почвы на глубине 10 см ",
                "uid": "1-02-52"
              },
              {
                "dstid": " GND - TMP - GNDT - 004 ",
                "name": " Температура почвы на глубине 15 см ",
                "uid": "1-02-52"
              }
            ]
          }
        }
      ]
    }
  }
}

```

**Возможные поля наблюдения**:

| **имя поля** | **тип**  | **описание**                        |
|--------------|----------|-------------------------------------|
| `oid`        | `string` | уникальный идентификатор наблюдения |
| `dstid`      | `string` | уникальный идентификатор типа ряда  |
| `name`       | `string` | название наблюдения или типа ряда   |
| `caption`    | `string` | сокращенное название типа ряда      |
| `main`       | `bool`   | главный типа ряда                   |

Поле `main` (главный тип ряда) вводили чтобы отмечать тот тип ряда, который является основым для данного типа
наблюдений. Например, для типа наблюдений "температура воздуха" главным является тип ряда "температура воздуха на высоте
2м"

## 3.2.Информация по указанному наблюдению

**Назначение:** для получения полной информации по идентификатору наблюдения

**Запрос** `/api/v2/observations/OBS_ID`

**Тип запроса:** GET

**Пример:**   `/api/v2/observations/ATM-TMP-AIRT-001`

**Ответ:** :

```json

{
  "meta": {},
  "response": {
    "observation": {
      "oid": "ATM-TMP",
      "name": "Температура воздуха",
      "uid": "1-02-52",
      "index": 123456,
      "dstypes": {
        "count": 2,
        "items": [
          {
            "dstid": "ATM-PRS-IXXXXXXXXXX",
            "name": "Температура воздуха (2м)",
            "meas_hash": -1083563,
            "uid": "1-02-52"
          },
          {
            "dstid": "ATM-PRS-IXXXXXXXM02",
            "name": "Минимальная температура воздуха за ночь (2м)",
            "meas_hash": -1083563,
            "caption": "минимальная температура за ночь",
            "uid": "1-02-52"
          }
        ]
      }
    }
  }
}

```

**Возможные поля наблюдения**:

| **имя поля** | **тип**  | **описание**                                                      |
|--------------|----------|-------------------------------------------------------------------|
| `oid`        | `string` | уникальный идентификатор наблюдения                               |
| `index`      | `int`    | уникальный числовой индекс (для совместимости со старой системой) |
| `name `      | `string` | название наблюдения                                               |
| `caption`    | `string` | сокращенное название наблюдения                                   |
| `def `       | `string` | описание наблюдения                                               |

